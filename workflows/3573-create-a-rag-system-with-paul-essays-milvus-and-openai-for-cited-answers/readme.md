# Insert and retrieve documents

## Use cases:

*   **Personal Knowledge Base:** Ingest articles or documents into a vector database (Milvus) and query them later using natural language to quickly retrieve relevant information.
*   **Chatbot with Contextual Awareness:** Build a chatbot that can answer questions based on a specific set of documents, providing citations to the source material.
*   **AI-Powered Document Search:** Improve document search capabilities by using embeddings to find documents that are semantically similar to a given query.

## How it works:

1.  **Scrape Paul Graham Essays:** The workflow starts by fetching a list of essays from `http://www.paulgraham.com/articles.html` and extracts the URLs.
2.  **Fetch and Extract Content:** It then iterates through the first 3 essay URLs, fetches the content of each essay, and extracts the main text content, removing images and navigation elements.
3.  **Load into Milvus:**  The extracted content is loaded into a Milvus vector store, first splitting text in chunks.  An OpenAI embedding model is used to generate vector embeddings for each chunk of text.
4.  **Chat Trigger:** A chat trigger listens for incoming chat messages.
5.  **Retrieve Relevant Chunks:** When a message is received, the message is used to query the Milvus vector store to retrieve the most relevant chunks of text (based on vector similarity).  An OpenAI embedding model is used to generate vector embeddings for each chunk of text.
6.  **Prepare Context:** The retrieved chunks are combined into a single text string.
7.  **Answer the Query:** An OpenAI Chat Model is then used to answer the query based on the combined context and the original message.  The model also identifies which chunks it used to generate the answer.
8.  **Compose Citations:** The indexes of the chunks used by the model are used to generate citations that point back to the original essays and line numbers.
9.  **Generate Response:** The final response includes the answer generated by the model, along with the citations.

## Services:

*   **paulgraham.com:** Website to scrape essay content from.
*   **Milvus:** Vector database for storing and querying document embeddings.
*   **OpenAI:** Used for generating embeddings and answering question.

## Hashtags:

#n8n #automation #AI #Milvus #VectorDatabase
