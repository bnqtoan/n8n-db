# Chat with Postgresql Database

## Use Cases

- **Database Querying via Chat:** Allows users to ask questions about their PostgreSQL database in natural language and receive answers based on the executed SQL queries.
- **Data Analysis Assistance:** Helps users analyze data stored in PostgreSQL by generating and executing SQL queries based on user requests, providing insights without requiring SQL expertise.
- **Automated Reporting:** Enables the creation of automated reports by querying the database and presenting the results in a user-friendly format through a chat interface.

## How it Works

1.  **Chat Trigger:** The workflow starts when a chat message is received via the "When chat message received" trigger.
2.  **AI Agent:** The "AI Agent" node, configured with an OpenAI Functions Agent, processes the chat message. It determines the appropriate action based on the user's request and available tools. The system message instructs the agent to act as a DB assistant that constructs SQL queries to answer questions, and fetch data as needed.
3.  **Language Model:** An "OpenAI Chat Model" node (GPT-4o-mini) is used to generate responses or SQL queries based on the AI Agent's instructions.
4.  **Memory:** Keeps track of previous conversations and stores it in the "Chat History" node.
5.  **Tool Execution:** The AI Agent can use three tools:
    *   **Execute SQL Query:** Executes SQL queries against the PostgreSQL database using the "Execute SQL Query" node. It retrieves data based on the query generated by the AI agent.
    *   **Get DB Schema and Tables List:** Retrieves the schema and table names from the PostgreSQL database using the "Get DB Schema and Tables List" node. This helps the AI Agent understand the database structure.
    *   **Get Table Definition:** Retrieves the definition of a specific table (column names, data types, etc.) from the PostgreSQL database using the "Get Table Definition" node.
6.  **Response:** The AI Agent then formulates a response based on the data retrieved or the results of the executed SQL queries and presents it to the user.

## Services

-   **PostgreSQL:** The database used for querying and data retrieval.
-   **OpenAI:** The AI language model used for natural language processing and SQL query generation.

## Hashtags

#n8n #automation #PostgreSQL #OpenAI #database
