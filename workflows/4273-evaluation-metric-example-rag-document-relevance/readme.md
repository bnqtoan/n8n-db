# My Workflow

## Use cases:

- **Evaluate the Relevance of Retrieved Documents:** Assess if the information retrieved from a vector store (like a knowledge base) is relevant to a specific question. This is useful for improving the accuracy and quality of responses generated by AI-powered systems.
- **Automated QA for RAG Systems:** Implement an automated quality assurance process for Retrieval-Augmented Generation (RAG) systems, ensuring that the retrieved context is appropriate and helpful for answering user queries.
- **Fine-tuning Vector Store Retrieval:** Use the relevance scores generated by this workflow to fine-tune the retrieval process of a vector store, optimizing for higher precision and recall.

## How it works:

This workflow is designed to evaluate the relevance of documents retrieved from a vector store in response to a question. Here's how it works:

1.  **Setup: Populate vector DB:**
    *   The workflow starts with a manual trigger to populate a vector store with documents from a Google Sheet.
    *   It reads data from a specified Google Sheet, removes duplicates, and inserts the documents into a vector store using Langchain nodes. The vector store acts as the knowledge base.
2.  **Main workflow:**
    *   It triggers when a new row is fetched from a Google Sheets dataset containing questions using an "Evaluation Trigger" node.
    *   Alternatively, can trigger an AI Agent using When Chat Message Received.
    *   The question is formatted.
    *   An AI Agent, configured with a system message to answer questions using only the vector knowledge base, processes the question.
    *   The agent uses the vector store to retrieve relevant documents. The vector store is set up as a tool, which the agent can use.
    *   Optionally, the workflow short circuits and gives a chat response if the Evaluating? node is off.
    *   The workflow extracts the documents retrieved by the agent to answer the question.
    *   The retrieved documents and the original question are sent to an OpenAI model (gpt-4o-mini) to calculate a similarity score. The OpenAI model evaluates the relevance of the documents to the question. It provides detailed reasoning and a score (0 or 1) indicating relevance.
    *   The similarity score is then recorded as a metric using the "Set metrics" node.

## Services:

-   Google Sheets: Used for storing questions and documents.
-   OpenAI: Used for embeddings, chat model, and evaluating document relevance.
-   Langchain: Used for Vector Store and AI Agent.

## Hashtags:

#n8n #automation #RAG #workflow #evaluation
